<%= form_with(model: @user) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>


  <div class='flex-wrap text-align-center'>
    <div class='flex-wrap'>
      <%= image_tag avatar_for(@user), 
          alt: 'Avatar', 
          size: '100x100',
          id:'avatar_upload_btn', 
          class:'avatar_upload_btn'  %>
      <%= f.file_field :avatar, 
          id: 'avatar_upload_field',
          class:'hidden'
      %>
      <div>( Click to edit avatar )</div>
    </div>    
  </div>
  
  <%= f.label :name %>
  <%= f.text_field :name, class: 'form-control' %>

  <%= f.label :email %>
  <%= f.email_field :email, class: 'form-control' %>

  <%= f.label :password %>
  <%= f.password_field :password, class: 'form-control' %>

  <%= f.label :password_confirmation %>
  <%= f.password_field :password_confirmation, class: 'form-control' %>

  <%= f.submit yield(:button_text), class: "btn btn-primary" %>
<% end %>


<script>
  // document.getElementById('avatar_upload_btn').addEventListener('click', e=> {
  //   console.log('avatar_upload_btn')
  //   e.preventDefault();
  //   document.getElementById('avatar_upload_field').click();
  // });

  // document.getElementById('avatar_upload_field').addEventListener('change', function() {
  //   const file = this.files[0];
  //   const reader = new FileReader();

  //   reader.onloadend = function() {
  //     document.getElementById('avatar_upload_btn').src = reader.result; // Update preview
  //   }
  //   if (file) {
  //     reader.readAsDataURL(file); // Read file and call onloadend
  //     console.log('Avatar file:', file.name);
  //     console.log('Avatar file path: ',  URL.createObjectURL(file));
  //   }
  // });
</script>
